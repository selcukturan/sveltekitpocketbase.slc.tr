<script lang="ts">
	import { Page, Head } from '$lib/components/templates';
	import { getUser } from '$lib/remotes/guarded.remote';

	import { Counter } from '$lib/app/counter.svelte';
	const counter = new Counter();

	import { createCounter } from '$lib/app/counter.svelte';
	import { goto } from '$app/navigation';

	let navigator = createCounter('');

	$inspect(navigator);

	let user = await getUser();

	const go = () => {
		goto('/grapes/crud/create-read-update-delete', {
			state: {
				message: 'Hello'
			}
		});
	};
</script>

<Head>
	<title>Dashboard - SLC Web Applications</title>
	<meta name="description" content="SLC Web Applications" />
</Head>

<Page>
	<Page.Header>
		<button onclick={() => getUser().refresh()}> Check getUser() {user?.email}</button>
	</Page.Header>
	<Page.Main>
		<Page.Main.Panel>
			<div class="flex h-full w-full flex-col gap-1 overflow-hidden">
				<a
					href="https://github.com/selcukturan/sveltekitpocketbase.slc.tr"
					class="bg-primary-200 text-primary-800 hover:bg-primary-300 active:bg-primary-400 rounded-md p-3 text-center"
					target="_blank"
					rel="noopener noreferrer"
				>
					Go to project github page
				</a>
				<pre>{JSON.stringify(user, null, 2)}</pre>
				<button
					onclick={go}
					class=" bg-primary-200 text-primary-800 hover:bg-primary-300 active:bg-primary-400 rounded-md p-3 text-center"
				>
					Go DataTable with filter and recordId in hash
				</button>

				<button
					onclick={counter.increment}
					class=" bg-primary-200 text-primary-800 hover:bg-primary-300 active:bg-primary-400 rounded-md p-3 text-center"
				>
					Count:{counter.count}
				</button>
			</div>
		</Page.Main.Panel>
	</Page.Main>
	<!-- <Page.Footer>Footer</Page.Footer> -->
</Page>
